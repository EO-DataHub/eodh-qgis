services:
  qgis-testing-environment:
    image: qgis/qgis:release-3_36
    volumes:
      - ./dist/eodh_qgis:/tests_directory
    environment:
      QGIS_VERSION_TAG: "release-3_36"
      WITH_PYTHON_PEP: "true"
      MUTE_LOGS: "true"
      CI: "true"
      DISPLAY: ":99"
    working_dir: /tests_directory
    entrypoint: /tests_directory/.docker/qgis-testing-entrypoint.sh
    # Enable "command:" line below to immediately run unittests upon docker-compose up
    # command: qgis_testrunner.sh test_suite.test_package
    # Default behaviour of the container is to standby
    command: tail -f /dev/null
    # qgis_testrunner.sh needs tty for tee
    tty: true
